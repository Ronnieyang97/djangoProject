{"remainingRequest":"/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/babel-loader/lib/index.js!/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/vue-amap/src/lib/components/amap-search-box.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/vue-amap/src/lib/components/amap-search-box.vue","mtime":1562133187000},{"path":"/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaCI7CmltcG9ydCBSZWdpc3RlckNvbXBvbmVudE1peGluIGZyb20gJy4uL21peGlucy9yZWdpc3Rlci1jb21wb25lbnQnOwppbXBvcnQgeyBsYXp5QU1hcEFwaUxvYWRlckluc3RhbmNlIH0gZnJvbSAnLi4vc2VydmljZXMvaW5qZWN0ZWQtYW1hcC1hcGktaW5zdGFuY2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2VsLWFtYXAtc2VhcmNoLWJveCcsCiAgbWl4aW5zOiBbUmVnaXN0ZXJDb21wb25lbnRNaXhpbl0sCiAgcHJvcHM6IFsnc2VhcmNoT3B0aW9uJywgJ29uU2VhcmNoUmVzdWx0JywgJ2V2ZW50cycsICdkZWZhdWx0J10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGtleXdvcmQ6IHRoaXMuZGVmYXVsdCB8fCAnJywKICAgICAgdGlwczogW10sCiAgICAgIHNlbGVjdGVkVGlwOiAtMSwKICAgICAgbG9hZGVkOiBmYWxzZSwKICAgICAgYWRjb2RlOiBudWxsCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIF9sb2FkQXBpUHJvbWlzZSA9IGxhenlBTWFwQXBpTG9hZGVySW5zdGFuY2UubG9hZCgpOwoKICAgIF9sb2FkQXBpUHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMubG9hZGVkID0gdHJ1ZTsKICAgICAgX3RoaXMuX29uU2VhcmNoUmVzdWx0ID0gX3RoaXMub25TZWFyY2hSZXN1bHQ7IC8vIHJlZ2lzdGVyIGluaXQgZXZlbnQKCiAgICAgIF90aGlzLmV2ZW50cyAmJiBfdGhpcy5ldmVudHMuaW5pdCAmJiBfdGhpcy5ldmVudHMuaW5pdCh7CiAgICAgICAgYXV0b0NvbXBsZXRlOiBfdGhpcy5fYXV0b0NvbXBsZXRlLAogICAgICAgIHBsYWNlU2VhcmNoOiBfdGhpcy5fcGxhY2VTZWFyY2gKICAgICAgfSk7CiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBfYXV0b0NvbXBsZXRlOiBmdW5jdGlvbiBfYXV0b0NvbXBsZXRlKCkgewogICAgICBpZiAoIXRoaXMubG9hZGVkKSByZXR1cm47CiAgICAgIHJldHVybiBuZXcgQU1hcC5BdXRvY29tcGxldGUodGhpcy5zZWFyY2hPcHRpb24gfHwge30pOwogICAgfSwKICAgIF9wbGFjZVNlYXJjaDogZnVuY3Rpb24gX3BsYWNlU2VhcmNoKCkgewogICAgICBpZiAoIXRoaXMubG9hZGVkKSByZXR1cm47CiAgICAgIHJldHVybiBuZXcgQU1hcC5QbGFjZVNlYXJjaCh0aGlzLnNlYXJjaE9wdGlvbiB8fCB7fSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhdXRvQ29tcGxldGU6IGZ1bmN0aW9uIGF1dG9Db21wbGV0ZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMua2V5d29yZCB8fCAhdGhpcy5fYXV0b0NvbXBsZXRlKSByZXR1cm47CgogICAgICB0aGlzLl9hdXRvQ29tcGxldGUuc2VhcmNoKHRoaXMua2V5d29yZCwgZnVuY3Rpb24gKHN0YXR1cywgcmVzdWx0KSB7CiAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykgewogICAgICAgICAgX3RoaXMyLnRpcHMgPSByZXN1bHQudGlwczsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMudGlwcyA9IFtdOwogICAgICBpZiAoIXRoaXMuX3BsYWNlU2VhcmNoKSByZXR1cm47CiAgICAgIHZhciBjaXR5ID0gbnVsbDsKCiAgICAgIGlmICh0aGlzLnNlYXJjaE9wdGlvbi5jaXR5bGltaXQgJiYgdGhpcy5zZWFyY2hPcHRpb24uY2l0eSkgewogICAgICAgIGNpdHkgPSB0aGlzLnNlYXJjaE9wdGlvbi5jaXR5OwogICAgICB9IGVsc2UgewogICAgICAgIGNpdHkgPSB0aGlzLmFkY29kZTsKICAgICAgfQoKICAgICAgdGhpcy5fcGxhY2VTZWFyY2guc2V0Q2l0eShjaXR5IHx8IHRoaXMuc2VhcmNoT3B0aW9uLmNpdHkpOwoKICAgICAgdGhpcy5fcGxhY2VTZWFyY2guc2VhcmNoKHRoaXMua2V5d29yZCwgZnVuY3Rpb24gKHN0YXR1cywgcmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQucG9pTGlzdCAmJiByZXN1bHQucG9pTGlzdC5jb3VudCkgewogICAgICAgICAgdmFyIHBvaXMgPSByZXN1bHQucG9pTGlzdC5wb2lzOwogICAgICAgICAgdmFyIExuZ0xhdHMgPSBwb2lzLm1hcChmdW5jdGlvbiAocG9pKSB7CiAgICAgICAgICAgIHBvaS5sYXQgPSBwb2kubG9jYXRpb24ubGF0OwogICAgICAgICAgICBwb2kubG5nID0gcG9pLmxvY2F0aW9uLmxuZzsKICAgICAgICAgICAgcmV0dXJuIHBvaTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMy5fb25TZWFyY2hSZXN1bHQoTG5nTGF0cyk7CiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQucG9pTGlzdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNoYW5nZVRpcDogZnVuY3Rpb24gY2hhbmdlVGlwKHRpcCkgewogICAgICB0aGlzLmFkY29kZSA9IHRpcC5hZGNvZGU7CiAgICAgIHRoaXMua2V5d29yZCA9IHRpcC5uYW1lOwogICAgICB0aGlzLnNlYXJjaCgpOwogICAgfSwKICAgIHNlbGVjdFRpcDogZnVuY3Rpb24gc2VsZWN0VGlwKHR5cGUpIHsKICAgICAgaWYgKHR5cGUgPT09ICd1cCcgJiYgdGhpcy5zZWxlY3RlZFRpcCA+IDApIHsKICAgICAgICB0aGlzLnNlbGVjdGVkVGlwIC09IDE7CiAgICAgICAgdGhpcy5rZXl3b3JkID0gdGhpcy50aXBzW3RoaXMuc2VsZWN0ZWRUaXBdLm5hbWU7CiAgICAgICAgdGhpcy5hZGNvZGUgPSB0aGlzLnRpcHNbdGhpcy5zZWxlY3RlZFRpcF0uYWRjb2RlOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkb3duJyAmJiB0aGlzLnNlbGVjdGVkVGlwICsgMSA8IHRoaXMudGlwcy5sZW5ndGgpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkVGlwICs9IDE7CiAgICAgICAgdGhpcy5rZXl3b3JkID0gdGhpcy50aXBzW3RoaXMuc2VsZWN0ZWRUaXBdLm5hbWU7CiAgICAgICAgdGhpcy5hZGNvZGUgPSB0aGlzLnRpcHNbdGhpcy5zZWxlY3RlZFRpcF0uYWRjb2RlOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/ronnie/PycharmProjects/djangoProject/appfront/node_modules/vue-amap/src/lib/components/amap-search-box.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"el-vue-search-box-container\"\n       @keydown.up=\"selectTip('up')\"\n       @keydown.down=\"selectTip('down')\">\n    <div class=\"search-box-wrapper\">\n      <input type=\"text\"\n        v-model=\"keyword\"\n        @keyup.enter=\"search\"\n        @input=\"autoComplete\">\n      <span class=\"search-btn\" @click=\"search\" >搜索</span>\n    </div>\n    <div class=\"search-tips\">\n      <ul>\n        <li v-for=\"(tip, index) in tips\"\n          :key=\"index\"\n          @click=\"changeTip(tip)\"\n          @mouseover=\"selectedTip=index\"\n          :class=\"{'autocomplete-selected': index === selectedTip}\">{{tip.name}}</li>\n      </ul>\n    </div>\n  </div>\n</template>\n<style lang=\"less\">\n  .el-vue-search-box-container {\n    position: relative;\n    width: 360px;\n    height: 45px;\n    background: #fff;\n    box-shadow: 0 2px 2px rgba(0,0,0,.15);\n    border-radius: 2px 3px 3px 2px;\n    z-index: 10;\n    .search-box-wrapper {\n      position: absolute;\n      display: flex;\n      align-items: center;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      box-sizing: border-box;\n\n      input {\n        flex: 1;\n        height: 20px;\n        line-height: 20px;\n        letter-spacing: .5px;\n        font-size: 14px;\n        text-indent: 10px;\n        box-sizing: border-box;\n        border: none;\n        outline: none;\n      }\n\n      .search-btn {\n        width: 45px;\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: transparent;\n        cursor: pointer;\n      }\n    }\n\n    .search-tips {\n      position: absolute;\n      top: 100%;\n      border: 1px solid #dbdbdb;\n      background: #FFF;\n      overflow: auto;\n\n      ul {\n        padding: 0;\n        margin: 0;\n\n        li {\n          height: 40px;\n          line-height: 40px;\n          box-shadow: 0 1px 1px rgba(0,0,0,.1);\n          padding: 0 10px;\n          cursor: pointer;\n\n          &.autocomplete-selected {\n            background: #eee;\n          }\n        }\n      }\n    }\n  }\n</style>\n<script>\nimport RegisterComponentMixin from '../mixins/register-component';\nimport {lazyAMapApiLoaderInstance} from '../services/injected-amap-api-instance';\nexport default {\n  name: 'el-amap-search-box',\n  mixins: [RegisterComponentMixin],\n  props: ['searchOption', 'onSearchResult', 'events', 'default'],\n  data() {\n    return {\n      keyword: this.default || '',\n      tips: [],\n      selectedTip: -1,\n      loaded: false,\n      adcode: null\n    };\n  },\n  mounted() {\n    let _loadApiPromise = lazyAMapApiLoaderInstance.load();\n    _loadApiPromise.then(() => {\n      this.loaded = true;\n      this._onSearchResult = this.onSearchResult;\n      // register init event\n      this.events && this.events.init && this.events.init({\n        autoComplete: this._autoComplete,\n        placeSearch: this._placeSearch\n      });\n    });\n  },\n  computed: {\n    _autoComplete() {\n      if (!this.loaded) return;\n      return new AMap.Autocomplete(this.searchOption || {});\n    },\n    _placeSearch() {\n      if (!this.loaded) return;\n      return new AMap.PlaceSearch(this.searchOption || {});\n    }\n  },\n  methods: {\n    autoComplete() {\n      if (!this.keyword || !this._autoComplete) return;\n      this._autoComplete.search(this.keyword, (status, result) => {\n        if (status === 'complete') {\n          this.tips = result.tips;\n        }\n      });\n    },\n    search() {\n      this.tips = [];\n      if (!this._placeSearch) return;\n      let city = null;\n      if (this.searchOption.citylimit && this.searchOption.city) {\n        city = this.searchOption.city;\n      } else {\n        city = this.adcode;\n      }\n      this._placeSearch.setCity(city || this.searchOption.city);\n      this._placeSearch.search(this.keyword, (status, result) => {\n        if (result && result.poiList && result.poiList.count) {\n          let {poiList: {pois}} = result;\n          let LngLats = pois.map(poi => {\n            poi.lat = poi.location.lat;\n            poi.lng = poi.location.lng;\n            return poi;\n          });\n          this._onSearchResult(LngLats);\n        } else if (result.poiList === undefined) {\n          throw new Error(result);\n        }\n      });\n    },\n    changeTip(tip) {\n      this.adcode = tip.adcode;\n      this.keyword = tip.name;\n      this.search();\n    },\n    selectTip(type) {\n      if (type === 'up' && this.selectedTip > 0) {\n        this.selectedTip -= 1;\n        this.keyword = this.tips[this.selectedTip].name;\n        this.adcode = this.tips[this.selectedTip].adcode;\n      } else if (type === 'down' && this.selectedTip + 1 < this.tips.length) {\n        this.selectedTip += 1;\n        this.keyword = this.tips[this.selectedTip].name;\n        this.adcode = this.tips[this.selectedTip].adcode;\n      }\n    }\n  }\n};\n</script>\n"],"sourceRoot":""}]}