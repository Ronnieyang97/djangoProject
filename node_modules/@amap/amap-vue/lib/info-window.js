"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./mixins/mixins.js"),t=require("./utils/amap-helpers.js"),n=require("./mixins/props.js"),i=require("./mixins/common.js"),o=require("./mixins/overlay.js"),s=require("./utils/types.js"),r=require("./utils/safe-get.js"),a=e.default(o.default,i.withVisible(!0,"open","close")).extend({name:"AmapInfoWindow",amapMeta:{slot:!0,async initComponent(e,t){const n={...t},i=r.default(this.$slots,"default.0.elm");return n.isCustom&&i&&(n.content=i),new e.InfoWindow(n)},events:["change","open","close"]},props:{isCustom:{type:Boolean,default:void 0},autoMove:{type:Boolean,default:void 0},avoid:n.defineProp({type:Array}),closeWhenClickMap:{type:Boolean,default:void 0},content:n.defineProp("setContent",String),size:n.defineProp({type:Array,transform:e=>new window.AMap.Size(e[0],e[1])}),anchor:n.defineProp({type:String,setter:"setAnchor",validator:e=>s.Anchors.includes(e)}),offset:n.defineProp({type:Array,transform:e=>new window.AMap.Pixel(e[0],e[1])}),position:n.defineProp({type:Array,deep:!0,setter(e,n){if(!n)return;const i=e.getPosition();i&&t.nearPair(n,t.lngLat2Array(i))||e.setPosition([n[0],n[1]])},getter(e){const n=e.getPosition();return t.lngLat2Array(n)},equals:t.theSamePair})},methods:{open(){this.$context.ready.then(e=>{const t=this.position;e.open(this.$map,t)})},close(){this.$context.ready.then(e=>{e.close()})},onOpen(){this.visible||this.$emit("update:visible",!0)},onClose(){this.visible&&this.$emit("update:visible",!1)},_updateContent(){this.visible&&this.$nextTick(()=>{const e=r.default(this.$slots,"default.0.elm",this.content);this.$context.ready.then(t=>{t.setContent(e)})})}},async mounted(){const e=await this.$context.ready;this.visible&&(this._updateContent(),this.open()),e.on("open",this.onOpen),e.on("close",this.onClose)},watch:{visible:"_updateContent",content:"_updateContent"}});exports.default=a;
