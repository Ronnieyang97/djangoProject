"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../utils/defer.js"),t=require("../utils/common.js"),s=require("./mixins.js"),a=require("../utils/log.js"),r=require("../utils/amap-helpers.js"),i=require("./events.js"),o=require("./props.js"),n=require("./component.js"),p=s.default(n.default).extend({inject:["$amapMap"],amapMeta:{slot:!1,initComponent:t.panic,add(e,t){t.setMap(e.target)},remove(e,t){t.setMap(null)}},beforeCreate(){const t=e.default(),s={AMap:null,ready:t.promise,target:null,vm:this,destroyed:!1};this.$amap={events:{},ready:t,context:s,logger:a.createLogger(this)}},async mounted(){const{$amap:e,$context:t,$container:s}=this,a=this.$options.amapMeta;await s.ready,t.AMap=s.AMap,a.prepare&&await a.prepare();const n=r.getOptionsFromProps(this);if(t.destroyed)return;const p=await a.initComponent.call(this,t.AMap,n);t.target=p,a.add.call(this,s,p),o.bindProps(this),i.bindEvents(this),e.ready.resolve(p),this.$emit("amap-ready",p)},beforeDestroy(){const{$context:e,$container:t,$target:s}=this;if(s){i.unbindEvents(this),this.$options.amapMeta.remove.call(this,t,s)}e.destroyed=!0},render(e){return this.$options.amapMeta.slot&&this.$slots.default?e("div",{class:"amap-vue-placeholder",style:"visibility: hidden; pointer-events: none;"},this.$slots.default):null}});exports.default=p;
